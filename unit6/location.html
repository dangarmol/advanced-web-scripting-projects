<html>
<!-- Learn about this code on MDN: https://developer.mozilla.org/en-US/docs/Web/API/Geolocation/Using_geolocation -->

<head>
<style type="text/css">
body {
  padding: 20px;
  background-color:#ffffc9
}

p { margin : 0; }
</style>

<script type="text/javascript">

function geoFindMe() {

	  if (!navigator.geolocation){
		output.innerHTML = "<p>Geolocation is not supported by your browser</p>";
		return;
	  }
	
	// place in HTML to show output
	  var output = document.getElementById("out");
	  
	// function to be called if geolocation is successful
	  function success(position) {
		var latitude  = position.coords.latitude;
		var longitude = position.coords.longitude;

		output.innerHTML = '<p>Latitude is ' + latitude + '° <br>Longitude is ' + longitude + '°</p>';

		var img = new Image();
		img.src = "https://maps.googleapis.com/maps/api/staticmap?center=" + latitude + "," + longitude + "&zoom=18&size=300x300&sensor=false";

		output.appendChild(img);
	  };


	// function to be called if geolocation is UNsuccessful
	  function error() {
	  output.innerHTML = "Unable to retrieve your location";
	  };

	// output status message
	  output.innerHTML = "<p>Locating…</p>";

	// attempt geolocation
	  navigator.geolocation.getCurrentPosition(success, error);
}

</script>

</head>

<body>
<!-- more obtrusive scripting, but hey its easier to understand -->
<p><button onclick="geoFindMe()">Show my location</button></p>

<div id="out"></div>
</body>
</html>
